#入場処理
execute as @a[x=-361,y=92,z=921,dx=2,dy=5,dz=3] at @s unless entity @s[nbt={Inventory:[{components:{"minecraft:custom_data":{"arena":true}}}]}] run tellraw @s {"translate":"system.system.lomia.arena.announce.18","color":"red"}
execute as @a[x=-361,y=92,z=921,dx=2,dy=5,dz=3] at @s unless entity @s[nbt={Inventory:[{components:{"minecraft:custom_data":{"arena":true}}}]}] run tp @s -363 92 923 90 ~
execute as @a[x=-361,y=92,z=921,dx=2,dy=5,dz=3,nbt={Inventory:[{components:{"minecraft:custom_data":{"arena":true}}}]}] at @s if score #start_count lomia matches 0 run scoreboard players set #start_count lomia 600
execute as @a[x=-361,y=92,z=921,dx=2,dy=5,dz=3,nbt={Inventory:[{components:{"minecraft:custom_data":{"arena":true}}}]}] at @s run teleport @s -324 99 897 ~90 ~

#退場処理
execute if score #start_count lomia matches ..0 as @a[x=-326,y=99,z=894,dx=3,dy=3,dz=1] at @s run teleport @s -367 92 923 ~-90 ~

#アナウンス
execute if score #start_count lomia matches 600 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:block.note_block.hat master @s
execute if score #start_count lomia matches 600 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] {"translate":"system.system.lomia.arena.announce.1"}
execute if score #start_count lomia matches 550 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:block.note_block.hat master @s
execute if score #start_count lomia matches 550 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] {"translate":"system.system.lomia.arena.announce.2"}
execute if score #start_count lomia matches 500 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:block.note_block.hat master @s

execute if score #start_count lomia matches 500 if score #pattern lomia matches 1 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.1","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.2","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 2 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.1","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.3","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 3 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.1","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.4","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 4 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.1","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.5","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 5 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.2","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.3","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 6 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.2","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.4","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 7 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.2","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.5","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 8 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.3","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.4","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 9 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.3","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.5","color":"red"}]
execute if score #start_count lomia matches 500 if score #pattern lomia matches 10 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] [{"translate":"system.system.lomia.arena.announce.4"},{"translate":"system.system.lomia.arena.announce.5","color":"aqua"},{"translate":"system.system.lomia.arena.announce.name.4","color":"aqua"},{"translate":"system.system.lomia.arena.announce.6","color":"yellow"},{"translate":"system.system.lomia.arena.announce.7","color":"red"},{"translate":"system.system.lomia.arena.announce.name.5","color":"red"}]



execute if score #start_count lomia matches 200 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:block.note_block.hat master @s
execute if score #start_count lomia matches 200 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] {"translate":"system.system.lomia.arena.announce.8"}
execute if score #start_count lomia matches 100 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:block.note_block.hat master @s
execute if score #start_count lomia matches 100 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] {"translate":"system.system.lomia.arena.announce.9"}
execute if score #start_count lomia matches 1 as @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] at @s run playsound minecraft:entity.ender_dragon.growl master @s ~ ~ ~ 0.7 1
execute if score #start_count lomia matches 1 run tellraw @a[x=-468,y=85,z=861,dx=193,dy=100,dz=110] {"translate":"system.system.lomia.arena.announce.10"}
execute if score #start_count lomia matches 1 run function namespace:main/city/lomia/mini_game/arena/start_battle

execute if score #start_count lomia matches 1.. run scoreboard players remove #start_count lomia 1
